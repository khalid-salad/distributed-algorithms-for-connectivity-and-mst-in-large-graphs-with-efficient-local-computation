\ProvidesPackage{main}
\RequirePackage[l2tabu, orthodox]{nag}
\usepackage[a4paper,margin=1in]{geometry}
\setlength{\marginparwidth}{2cm} 
\usepackage{amssymb,amsmath,amsthm,amsfonts,mathrsfs,xcolor}
\usepackage{mathtools}
\usepackage[notref, notcite]{showkeys}
\usepackage{ifdraft, tocloft}
\usepackage{xparse, xspace}
\usepackage{setspace}
\usepackage{ifthen}
\usepackage[titletoc]{appendix}
\usepackage{graphicx}
\usepackage{lineno}
\usepackage[inline]{enumitem}
\usepackage{cancel}
\usepackage{calc}
\usepackage{caption, subcaption}
\usepackage{tabularx}
\usepackage[normalem]{ulem}
\usepackage{microtype}
\usepackage[colorlinks=true]{hyperref}
\hypersetup{final}
\usepackage[capitalize]{cleveref}
\usepackage{booktabs, multicol, multirow, adjustbox, blkarray}
\usepackage{xfrac}
\UseCollection{xfrac}{plainmath}
\usepackage{mleftright}
\mleftright
\usepackage{algpseudocode}
\usepackage{keyval}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage{layout}
\ifdraft{\usepackage{draftwatermark}\SetWatermarkAngle{90}\SetWatermarkFontSize{2cm}\SetWatermarkHorCenter{1cm}}{}




\newcommand{\floor}[1]{\left\lfloor#1\right\rfloor}
\newcommand{\ceil}[1]{\left\lceil#1\right\rceil}
\newcommand{\cyclicgroup}[1]{\left\langle#1\right\rangle}
\newcommand{\card}[1]{\left\lvert#1\right\rvert}
\newcommand{\abs}[1]{\left\lvert#1\right\rvert}
\newcommand{\bigO}[1]{\mathcal{O}\left(#1\right)}
\newcommand{\bigOm}[1]{\Omega\left(#1\right)}
\newcommand{\bigTh}[1]{\Theta\left(#1\right)}
\newcommand{\softO}[1]{\tilde{\mathcal{O}}\left(#1\right)}
\newcommand{\softOm}[1]{\tilde{\Omega}\left(#1\right)}
\newcommand{\softTh}[1]{\tilde{\Theta}\left(#1\right)}
\newcommand{\littleO}[1]{o\left(#1\right)}
\newcommand{\littleOm}[1]{\omega\left(#1\right)}
\newcommand{\littleTh}[1]{\theta\left(#1\right)}
\renewcommand{\Pr}{\mathbb{P}}
\newcommand{\prob}[1]{\operatorname{\Pr}\left(#1\right)}
\newcommand{\expectation}[1]{\operatorname{\mathbb{E}}\left[#1\right]}
\newcommand{\variance}[1]{\operatorname{\mathbb{V}}\left[#1\right]}
\newcommand{\suchthat}{\mid}
\newcommand{\given}{\mid}
\newcommand{\divides}{\mid}
\newcommand{\concat}{+}
\newcommand{\sign}[1]{\operatorname{sign}\left(#1\right)}
\newcommand{\set}[1]{\left\lbrace#1\right\rbrace}
\renewcommand{\vec}[1]{\boldsymbol{#1}}
\newcommand{\nth}[1]{#1^{\text{th}}}
\DeclareMathOperator{\midindex}{midindex}
\newcommand{\invack}[1]{\alpha\left(#1\right)}
\newcommand{\sketch}{\mathbf{s}}
\DeclareMathOperator{\polylog}{polylog}
\DeclareMathOperator{\avg}{avg}

\newtheoremstyle{tcb-drop-in-thm}% 〈name〉
                {}% 〈Space above〉1
                {}% 〈Space below 〉1
                {}% 〈Body font〉
                {}% 〈Indent amount〉2
                {\bfseries\color{white}}% 〈Theorem head font〉
                {}% 〈Punctuation after theorem head 〉
                {\newline}% 〈Space after theorem head 〉3
                {\thmname{#1}\thmnumber{ #2}\thmnote{ $\blacktriangleright$ #3}\\*[-1.5ex]}% 〈Theorem head spec (can be left empty, meaning ‘normal’ )〉
\theoremstyle{tcb-drop-in-thm}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}

\usepackage{tcolorbox}
\tcbuselibrary{skins, breakable}
\tcolorboxenvironment{theorem}{%
    colback=gray!25,
    colframe=gray!90!black,
    enhanced,
    top=0mm,
    overlay={\begin{tcbclipinterior}
        \fill[gray!90!black] (frame.north west)rectangle ([yshift=-5.5mm]frame.north east);
            \end{tcbclipinterior}}
}
\tcolorboxenvironment{lemma}{%
colback=gray!25,
colframe=gray!90!black,
enhanced,
top=0mm,
overlay={\begin{tcbclipinterior}
    \fill[gray!90!black] (frame.north west)rectangle ([yshift=-5.5mm]frame.north east);
        \end{tcbclipinterior}}
}
\tcolorboxenvironment{proposition}{%
colback=gray!25,
colframe=gray!90!black,
enhanced,
top=0mm,
overlay={\begin{tcbclipinterior}
    \fill[gray!90!black] (frame.north west)rectangle ([yshift=-5.5mm]frame.north east);
        \end{tcbclipinterior}}
}


% \theoremstyle{plain}
% \newtcbtheorem[
%     auto counter,
%     number within=section,
%     crefname={Theorem}{Theorems},
%     Crefname={Theorem}{Theorems}
%     ]{theorem}{Theorem}{
%     colback=gray!25,
%     colframe=gray!90!black,
%     fonttitle=\bfseries,
%     separator sign={~$\blacktriangleright$}}{thm}

% \newtcbtheorem[
%     number within=section,
%     crefname={Definition}{Definitions},
%     Crefname={Definitions}{Definitions}
%     ]{definition}{Definition}{
%     colback=blue!5,
%     colframe=blue!35!black,
%     fonttitle=\bfseries,
%     separator sign={~$\blacktriangleright$}}{def}

% \newtcbtheorem[
%     number within=section,
%     use counter from=theorem,
%     crefname={Lemma}{Lemmas},
%     Crefname={Lemma}{Lemmas}
%     ]{lemma}{Lemma}{
%     colback=gray!25,
%     colframe=gray!90!black,
%     fonttitle=\bfseries,
%     separator sign={~$\blacktriangleright$}}{lem}

% \newtcbtheorem[
%     number within=section,
%     use counter from=theorem,
%     crefname={Corollary}{Corollaries},
%     Crefname={Corollary}{Corollaries}
%     ]{corollary}{Corollary}{
%     colback=gray!25,
%     colframe=gray!90!black,
%     fonttitle=\bfseries,
%     separator sign={~$\blacktriangleright$}}{cor}

% \newtcbtheorem[
%     number within=section,
%     use counter from=theorem,
%     crefname={Proposition}{Propositions},
%     Crefname={Proposition}{Propositions}
%     ]{proposition}{Proposition}{
%     colback=gray!25,
%     colframe=gray!90!black,
%     fonttitle=\bfseries,
%     separator sign={~$\blacktriangleright$}}{prop}